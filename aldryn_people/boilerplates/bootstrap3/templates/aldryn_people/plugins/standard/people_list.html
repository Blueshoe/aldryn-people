{% load i18n %}

<div class="aldryn aldryn-people">
    {% if not people_groups %}
        {# if grouping is disabled, list only people #}
        <div class="aldryn-people-list">
            {% for person in people %}
                {% include "aldryn_people/includes/person.html" with person=person %}
            {% endfor %}
        </div>
    {% else %}
        {# if enabled, we group the people by categories defined #}
        <div class="aldryn-people-list-group">
            {% language instance.language %}
                {# IMPORTANT: first sow people with a group #}
                {% for group, person in people_groups.items %}
                    {% if group.name %}
                        {% include "aldryn_people/includes/group.html" %}
                        {% include "aldryn_people/includes/person.html" with person=person group="true" %}
                    {% endif %}
                {% endfor %}
                {# IMPORTANT: and than the remaining #}
                {% for group, person in people_groups.items %}
                    {% if not group.name %}
                        <h2>{% trans "Uncategorized" %}</h2>
                        {% include "aldryn_people/includes/person.html" with person=person group="true" %}
                    {% endif %}
                {% endfor %}
            {% endlanguage %}
        </div>
    {% endif %}
</div>
